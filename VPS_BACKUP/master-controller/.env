# Master Controller Environment Configuration
# Production deployment for VPS

# Server
NODE_ENV=production
PORT=4000
HOST=0.0.0.0

# Database (Supabase)
SUPABASE_URL=https://oxhutuxkthdxvciytwmb.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHV0dXhrdGhkeHZjaXl0d21iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyNzMzMzcsImV4cCI6MjA3MTg0OTMzN30.EsiSRt0diyWACYNKldKPl8oOQ4JxV6y0CJF9CseQSPc
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHV0dXhrdGhkeHZjaXl0d21iIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NjI3MzMzNywiZXhwIjoyMDcxODQ5MzM3fQ.AX97KtQDwBvJe017gzqUkJd1zuIHU07nMaAOJB4CR6c

# Encryption (32-byte hex key for AES-256-GCM)
ENCRYPTION_MASTER_KEY=cd6899a701ca154f6134ae7836aeab2840809cf1a0f01f04942cce3f1a4ff858

# Decodo Proxy
DECODO_USER=sp9dso1iga
DECODO_PASSWORD=GjHd8bKd3hizw05qZ=
DECODO_HOST=dc.decodo.com
DECODO_PORT_START=10001
DECODO_PORT_END=10100

# Firecracker
FIRECRACKER_BASE=/var/lib/firecracker
FIRECRACKER_BINARY=/usr/local/bin/firecracker
JAILER_BINARY=/usr/local/bin/jailer
GOLDEN_SNAPSHOT=
GOLDEN_MEMORY=
GOLDEN_KERNEL=/var/lib/firecracker/vmlinux
GOLDEN_ROOTFS=/var/lib/firecracker/snapshots/base/golden-rootfs.ext4
GOLDEN_BROWSER_ROOTFS=/var/lib/firecracker/snapshots/base/golden-browser-rootfs.ext4

# Network
INTERNAL_NETWORK=192.168.100.0/24
BRIDGE_DEVICE=fcbr0
BRIDGE_IP=192.168.100.1
IP_POOL_START=192.168.100.2
IP_POOL_END=192.168.100.254

# Performance Limits
VM_IDLE_TIMEOUT=1800000          # 30 minutes in ms
VM_DESTROY_TIMEOUT=1209600000    # 2 weeks in ms
MAX_CONCURRENT_VMS=180
MAX_BROWSER_VMS=2

# CLI VM Resources
CLI_VM_VCPU=0.5
CLI_VM_MEMORY_MB=2048

# Browser VM Resources
BROWSER_VM_VCPU=2

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000      # 15 minutes
RATE_LIMIT_MAX_REQUESTS=1000

# Monitoring
PROMETHEUS_ENABLED=true
METRICS_COLLECTION_INTERVAL=10000  # 10 seconds

# Logging
LOG_LEVEL=info
LOG_FILE=/var/log/polydev/master-controller.log
ERROR_LOG_FILE=/var/log/polydev/master-controller-error.log

# WebSocket
WS_HEARTBEAT_INTERVAL=30000      # 30 seconds
WS_CONNECTION_TIMEOUT=120000     # 2 minutes

# Debug
DEBUG_PRESERVE_VMS=true

# Firecracker kernel paths
GOLDEN_KERNEL=/var/lib/firecracker/vmlinux
GOLDEN_INITRD=/boot/initrd.img
export BROWSER_VM_MEMORY_MB=4096
