# Tinyproxy configuration for IPv4-only DNS resolution
# This proxy handles DNS at the HTTP level, bypassing Node.js c-ares

User root
Group root
Port 3128
Listen 127.0.0.1
Timeout 600
DefaultErrorFile "/usr/share/tinyproxy/default.html"
StatFile "/usr/share/tinyproxy/stats.html"
LogFile "/var/log/tinyproxy/tinyproxy.log"
LogLevel Info
PidFile "/run/tinyproxy/tinyproxy.pid"
MaxClients 100
MinSpareServers 5
MaxSpareServers 20
StartServers 10
MaxRequestsPerChild 0

# Allow connections from localhost only
Allow 127.0.0.1

# Connect to any host via the proxy
ConnectPort 443
ConnectPort 80

# Disable upstream proxy (connect directly)
# This ensures DNS is resolved by tinyproxy using getaddrinfo() which respects /etc/hosts
